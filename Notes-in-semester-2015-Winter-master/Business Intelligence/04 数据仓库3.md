#04 数据仓库3
##四、数据集市与数据仓库
###1.建立数据集市的原因
* 组织信息  
	* 统一的数据视图和访问接口
	* 全局性数据组织
		* 统一的数据模式
		* 统一的数据表示
		* 统一的数据属性
* 全局性数据仓库往往太大  
按部门或个人分别建立反映各个子主题的*局部性*数据组织，反映某一特定领域信息  
此即**数据集市**
	> ######例：商品销售的数据仓库拆分
	> * 商品采购数据集市
	> * 库房使用数据集市
	> * 商品销售数据集市

	* ***操作型数据库与数据集市存在区别***
		1. 不一定所有部门都拥有操作性数据库
		2. 不一定所有部门都拥有建立在操作型数据库基础上的应用
		3. 不一定所有部门都需要使用数据集市
###2.数据仓库/数据集市体系
	数据仓库从分析型数据库中抽取数据，数据仓库再将这些数据分散给不同的数据集市  
	数据集市包含什么东西，取决于当前数据集市的拥有者有怎么样的分析需求
* 数据仓库仓库与集市类似于基表与视图的关系  
	* 从效率上考量，整个系统的效率会有所提升
	* 不应将所有信息公开给某一个分析人员，权限必须清晰地控制  
	当前数据仓库概念意义上的子集，内容得到精心挑选
* 数据集市中的数据来自数据仓库，是数据仓库中数据的一个部分与局部  
是数据的再抽取与组织的过程
* 从性质上讲，数据集市除了在规模上与数据仓库有差异，其它方面与数据仓库没有任何区别  
数据集市面向特定的分析需求和用户群，而不是全局
####数据集市的两种类型
* 独立的数据集市  
怎么做数据仓库就怎么做数据集市
* 从属性数据集市  
在建立完毕的数据仓库上，将数据集市的那部分数据单独地摘取出来
	* 此时建立数据集市没有ETL的过程
	* 当前的从属性数据集市与数据仓库**未必**是准确的复本关系
####数据仓库与数据集市的关系
* 自顶向下的结构  
从数据仓库构建数据集市，数据集市之前没有关联  
	* 优点
		* 减轻数据仓库访问负载
		* 各部门可以任意处理数据
		* 数据转换和整合在DW阶段统一完成
		* 具备数据缓冲的功能
	* 缺点：成本高，见效慢，各集市间不共享任何数据  
	小规模应用容易展现，但需要花费大代价先完成数据仓库的建立，数据仓库建立完成之前没有任何实效
* 自底向上的结构  
先构建独立的数据集市，再试图将这些数据集市统一成全局的数据仓库
	* 优点：见效快，启动资金少
	* 缺点
		* 各个部门都要进行数据清理整合  
		额外增加的分析性数据环境使数据源更加混乱
		* 可能造成“蜘蛛网”、数据不一致等问题
		* 总体上不能节约资金
* 总线结构的数据集市  
定义一组总线，在构造每一个特定的数据集市时，优先定义各个数据集市中可能发生冲突的数据  
	* 不定义主题，以相同的编码和准则定义主题与主题之间的**公共维度**，即总线
	* 不建立数据仓库而直接建立数据集市
	* 各个数据集市之间相互通过总线连接
	* 优点：共享维表和事实表，解决了建立数据集市的问题
	* 缺点
		* 数据没有在全局范围内进行过检查
		* 直接基于多维模型，只能应用于OLAP
		* 集成产生的数据仓库并不十分稳定
####企业级数据集市结构
建立总线结构的数据仓库，在条件允许的前提下做一个数据仓库（物理意义上的），这样总线已经处理掉了明显的不一致问题；之后的数据集市的建立就成为了自顶向下的方式

*此结构综合了各种各样的优点，但消耗的资源更多*
##五、数据仓库的应用
充分开发、利用数据库和数据仓库中的数据资源是计算机界目前的重要工作

* 查询服务
* 演绎
	* 演绎数据库、知识库
	* 统计分析软件（SPSS）
* 归纳  
数据挖掘
###1.操作型、分析型环境间的数据流
* 某些时候，存在从数据仓库环境到操作性环境的数据回流
* 操作性环境中直接采用SQL等方式访问数据仓库的“回流”是不正常
####数据仓库数据的直接访问
存在以下限制：

* 请求数据仓库数据的操作型处理通常不具有在线特性
* 对数据的请求必须是少量的
* 管理数据仓库和管理操作型环境用到的技术（如协议等）必须一致
* 从数据仓库取得的、准备传输到操作性环境的数据必须不用做或只要做很少的格式化

**因此操作型环境到数据仓库的直接访问很少**
####数据仓库数据的间接访问
> ######例：飞机订票系统
> * 离线时，航班的折扣信息从数据仓库中挖掘出需要的信息，计算结果（单此操作时间长）
> * 在线时，订票系统直接简单地读取预先被计算出的折扣结果（毫秒级别）
> ######例：市场分析程序
> 市场分析程序预先分析客户历史，电话推销员通过会员ID等凭据直接获取客户信息

后台程序对数据仓库进行定期分析，在在线程序中产生一个小文件，记录在操作型环境中可能会用到的分析结果

* 分析程序
* 周期性刷新
* 在线预分析数据文件
###2.分析型应用
####客户关系管理
* 客户数据的集成
	* 客户信息中姓名和地址的集成
		* 地址信息的切分
		* 地址的标准化
	* 客户数据的更新
		* 新客户的识别
		* 老客户的信息更新
* 客户信息的分析与挖掘
	* 客户特征分类分析  
	发现新客户
	* 客户盈利分析  
	挖掘优质客户
	* 客户行为分析  
	发现客户异常行为
	* 客户需求分析
	* 客户反映分析  
	提供一对一服务，防止已有客户的流失
####商业零售
* 客户信息管理与分析  
客户关系管理
	* 客户特征分析  
	针对不同特征设定不同的促销方案
	* 客户购买行为与购买习惯分析
* 销售分析
	* 销售额与销售时间的关系
	* 销售额与商品的关系
	* 销售额与销售地区的关系
	* 销售额与购买客户的关系
* 货种管理  
不同种类商品的关系分析
* 市场分析
	* 商品销售预测
	* 商品价格分析
	* 零售点设置布局
* 库存管理
	* 仓库使用管理
	* 商品的库存数量分析
* 人力资源管理
####金融领域
* 账户信用等级评估  
以聚类分析等方法对银行账户分类，得到账户的信用等级
* 信用卡运作
	* 新客户的发现
	* 优质客户挖掘
	* 老客户的保留
	* 信用卡使用模式分析
* 股票交易规律分析
	* 客户分类
	* 客户交易
	* 客户账户
	* 客户价值
* 财政预算和计划
####保险业
* 保险费率的确定  
不同条件、不同人员、不同险种、不同时间与年龄的保险费率
* 险种关联分析  
分析客户在购买了某种保险后是否同时还会购买另一种保险
* 认购险种的预测  
通过数据挖掘预测新险种的客户群以及新险种的前景
####电讯行业
* 客户开发  
开展新客户，防止丢失很有利的客户，查明哪些客户会离开，又为什么
* 活动成本管理  
需花多少钱来实现一个新线或建立一项新服务
* 价格制定  
分时段制定收费标准
* 调用详细记录分析  
了解每次通话记录的详细信息，包括通话类型、时长、通话位置等，以便于进行定价和容量规划  
异常电话检测（盗打，欠费等）
* 电信市场  
向客户提供混合销售、呼叫、等待、留言等新服务
####医疗
* 成本分析  
费用支出分析  
如何能最有效地减少费用支出
* 客户分类
####政府
* 税务  
个人所得税的偷税漏税现象分析  
税收政策与计划的制订
* 交通  
航班/车次的时间/方向/客流量分析
价格分析
客户满意度分析
* 水利  
防洪、抗旱决策分析
* 公安
* ……
####其它
* 新闻出版业
* 酒店管理
* ……